(function(){function e(){l.innerHTML="";for(var e=0;e<c;e++){row=l.insertRow(e);for(var r=0;r<c;r++){cell=row.insertCell(r),cell.addEventListener("contextmenu",function(e){return e.preventDefault(),a(this),!1},!1),cell.addEventListener("click",function(){i(this)});var n=document.createAttribute("data-mine");n.value="false",cell.setAttributeNode(n)}}t(),f=!0}function t(){for(var e=0;e<s;e++){var t=Math.floor(Math.random()*c),r=Math.floor(Math.random()*c),n=l.rows[t].cells[r];n.setAttribute("data-mine","true")}}function r(){for(var e=0;e<c;e++)for(var t=0;t<c;t++){var r=l.rows[e].cells[t];"true"==r.getAttribute("data-mine")&&(r.className="mine")}f=!1}function n(){for(var e=!0,t=0;t<c;t++)for(var n=0;n<c;n++)"false"==l.rows[t].cells[n].getAttribute("data-mine")&&""==l.rows[t].cells[n].innerHTML&&(e=!1);e&&r()}function a(e){e.className="right-clicked"}function i(e){if("true"==e.getAttribute("data-mine"))r();else if(0!=f){e.className="clicked";for(var t=0,a=e.parentNode.rowIndex,o=e.cellIndex,s=Math.max(a-1,0);s<=Math.min(a+1,c-1);s++)for(var u=Math.max(o-1,0);u<=Math.min(o+1,c-1);u++)"true"==l.rows[s].cells[u].getAttribute("data-mine")&&t++;if(e.innerHTML=t,0==t)for(s=Math.max(a-1,0);s<=Math.min(a+1,c-1);s++)for(u=Math.max(o-1,0);u<=Math.min(o+1,c-1);u++)""==l.rows[s].cells[u].innerHTML&&i(l.rows[s].cells[u]);n()}}function o(){e(),u.addEventListener("click",e)}var l=document.getElementById("mine-grid"),c=width<"601"?"5":"10",s="10"===c?"20":"5",f=!0;const u=document.querySelector(".refresh");o()})();
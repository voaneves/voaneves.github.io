var grid=document.getElementById("mine-grid"),testMode=!1;const refresh=document.querySelector(".refresh");function generateGrid(){grid.innerHTML="";for(var e=0;e<10;e++){row=grid.insertRow(e);for(var r=0;r<10;r++){cell=row.insertCell(r),cell.onclick=function(){clickCell(this)};var t=document.createAttribute("data-mine");t.value="false",cell.setAttributeNode(t)}}addMines()}function addMines(){for(var e=0;e<20;e++){var r=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),i=grid.rows[r].cells[t];i.setAttribute("data-mine","true"),testMode&&(i.innerHTML="X")}}function revealMines(){for(var e=0;e<10;e++)for(var r=0;r<10;r++){var t=grid.rows[e].cells[r];"true"==t.getAttribute("data-mine")&&(t.className="mine")}}function checkLevelCompletion(){for(var e=!0,r=0;r<10;r++)for(var t=0;t<10;t++)"false"==grid.rows[r].cells[t].getAttribute("data-mine")&&""==grid.rows[r].cells[t].innerHTML&&(e=!1);e&&(alert("You Win!"),revealMines())}function clickCell(e){if("true"==e.getAttribute("data-mine"))revealMines(),alert("Game Over");else{e.className="clicked";for(var r=0,t=e.parentNode.rowIndex,i=e.cellIndex,a=Math.max(t-1,0);a<=Math.min(t+1,9);a++)for(var n=Math.max(i-1,0);n<=Math.min(i+1,9);n++)"true"==grid.rows[a].cells[n].getAttribute("data-mine")&&r++;if(e.innerHTML=r,0==r)for(a=Math.max(t-1,0);a<=Math.min(t+1,9);a++)for(n=Math.max(i-1,0);n<=Math.min(i+1,9);n++)""==grid.rows[a].cells[n].innerHTML&&clickCell(grid.rows[a].cells[n]);checkLevelCompletion()}}function main(){generateGrid(),refresh.addEventListener("click",generateGrid)}main();